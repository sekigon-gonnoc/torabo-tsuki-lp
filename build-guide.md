## 同梱品

| 名称                                                     | 数  |
| -------------------------------------------------------- | --- |
| メイン基板                                               | 1   |
| トッププレート                                           | 2   |
| ボトムプレート                                           | 2   |
| 電池ボックス(単三)                                       | 2   |
| スペーサー(4.5mm)                                        | 8   |
| ねじ(M2x3.5)                                             | 18  |
| **トラックボール部品**                                   |     |
| トラックボールセンサー(14mmマウスセンサーモジュール)     | 1   |
| フレキシブルケーブル(0.5mmピッチ、6P、100mm、電極同一面) | 1   |
| ベアリング(4x1.5x2 mm)                                   | 3   |
| ねじ(M1.4)                                               | 3   |
| **BMP Boost同梱の場合**                                  |     |
| BMP Boost                                                | 2   |

## 別途必要な部品

| 名称                                           | 数    | 補足                                                                                                       |
| ---------------------------------------------- | ----- | ---------------------------------------------------------------------------------------------------------- |
| キースイッチ(Choc V2)                          | 37(S) |                                                                                                            |
| キーキャップ                                   | 適量  |                                                                                                            |
| 25mmトラックボール交換球  or 19.05mm POMボール | 1     |                                                                                                            |
| コンスルー                                     | 4     | 13ピン（高さ2.5mm）を使用してください。欠品している場合は12ピンを5個買って、1個を切り離して使ってください  |
| 電池カバー、トラックボールケース(25mm or 19mm) | 1式   | 3Dプリントサービスや自前で出力してください。JLC3DPだと送料込みで$5くらいで製造できます（詳細は後述）       |
| ゴム足                                         | 8     | GRIPLUSなど薄型の物がおすすめです                                                                          |
| 単三電池                                       | 2     | Ni-MH可。USBで充電できるリチウム電池内蔵のものを使う場合、必ずキーボードから取り外してから充電してください |
| **BMP Boost別売りの場合**                      |       |                                                                                                            |
| BMP Boost                                      | 2     | BLE Micro Proは使用できません                                                                              |
 

## 必要な工具
- はんだごて、はんだ
- ニッパー
- ペンチ
- ドライバー
- （やすり）
- PC
- USBケーブル

## 3Dプリント部品の製造(JLC3DP利用)


[JLC3DP](https://jlc3dp.com/jp/3d-printing-quote)にアクセスします。

[3d-models/STL](3d-models/STL/)フォルダのSTLファイルの中身をJLC3DPにアップロードします。トラックボールケースはサイズが2種類あります。製造時に片方に決めてもいいですし、両方頼んで届いてから考えてもいいです。

![](img/upload-3d-models.png)

読み込んだすべてのファイルについて、商品概要は`エンクロージャー...`から`プラスチックエンクロージャ`を選択します。

![](img/select-enclouser.png)

モデルのサムネイルの下に`印刷リスク`の表示がある場合は`はい`をチェックしてください。

![](img/printing-risks.png)

カートに保存し、注文手続きを進めます。配送方法はOCSを選択すると2ドルで配送してもらえます（2025年7月時点、月3回まで）。

発注履歴が表示されるようになった状態で数分経ってからタブをリロードすると、ファイル名の横に!マークが表示されることがあります。

その場合は!マークをクリックし、`はい`を選択してください。

| ![](img/3dp-caution.png) | ![](img/error-confirm.png) |
| ------------------------ | -------------------------- |

JLC3DPによるレビュー中にメールで問い合わせが来る場合がありますが、そのまま製造するように依頼してください。
気になる人は自分でCADデータを修正してください。


## 組立手順

### メイン基板のレール部分を折って切り離す

![](img/main-pcb.JPG)

### メイン基板・トッププレートのトラックボール搭載部分と、トラックボールを搭載しないほうのボトム基板の余剰部分を切り離す

ニッパーでそのまま切り離せない場合は、表裏に切れ目を入れてから折り取ってください

* **向きを間違えないように注意してください。下記画像は右側にトラックボールを搭載する例です。**

![](img/pcb-cut.JPG)

### 電池ボックスをはんだ付けする

* 電池ボックスの足を折り曲げます。
* ボトムプレートに電池ボックスを載せ、その上からメイン基板を載せます。向きに注意してください。
* 余った足を短く切ってからはんだ付けします。メイン基板とボトム基板がぴったりくっついた状態ではんだ付けするようにしてください。

|![](img/battery-pin.JPG)|![](img/battery-set.JPG)|
|-|-|
|![](img/battery-cut.JPG)



### トッププレート・メイン基板にスイッチを差し込む

![](img/switch-set.JPG)

### メイン基板にBMP Boostをコンスルーで取り付ける

* はんだ付けは不要です。
* コンスルーの向きは揃えてください。

|![](img/bmp-boost-1.JPG)|![](img/bmp-boost-2.JPG)|
|-|-|

### ファームウェアを書きこむ

* スイッチをOFFにした状態で、BMPをPCにUSBケーブルで接続します。
* BLEMICROPROという名前のストレージがマウントされたら、中身にINFO_UF2.TXTがあることを確認してください。
* [Releases](https://github.com/sekigon-gonnoc/zmk-keyboard-torabo-tsuki-lp/releases)からファームウェアのuf2ファイルをダウンロードします。
* uf2ファイルを1つ選んでストレージにコピーしてください。トラックボールがあるほうがCentral、ないほうがPeripheralです。
  * たとえば右側トラックボールで組み立てた場合、右手に`torabo_tsuki_lp_right_central`、左手に`torabo_tsuki_lp_left_peripheral`を書き込んでください。
* 書き込みが完了したら一度USBケーブルを抜き、スイッチをONにした状態でUSBケーブルを差し直すとキーボードとして動作します。

### トッププレートにスペーサーをねじ止めする

* スペーサーをトッププレートにねじ止めします。

![](img/top-spacer.JPG)

### トラックボールケースにベアリングをネジで固定する

* ケースに空いている穴にねじを押し込みながら回すようにしてベアリングを固定します。
* ベアリングは多少ガタつきますが問題ありません。

![](img/trackball-case.JPG)

### トラックボールセンサーにケーブルを差し込む

* コネクタのフラップ（黒い部分）を上に持ち上げ、トラックボールのケーブルをしっかり奥まで差し込み、フラップを下げます。

![](img/mouse-sensor.JPG)

### トラックボールのケーブルをメイン基板のコネクタに差し込む

![](img/sensor-cable.JPG)

### センサーの動作確認をする

* USBケーブルでPCとBMP Boostを接続します。
* センサーのレンズ側を机から2mmくらい浮かせてセンサー基板を動かしたり、レンズの上空を指で動かしたりしてマウスカーソルが動くならば、センサーは正常に動作しています。 
* センサーの動作確認ができたらUSBケーブルは取り外してください。

### トラックボールセンサーをケースに取り付ける

* ケースの中央あたりまで差し込みます。
* 緩すぎてすぐ抜けてしまう場合は紙などを挟んで調節してください。
* きつすぎる場合は背面の突起を削ってください。
* トラックボールの反応が悪い場合には取り付け位置を調整してください。

|![](img/trackball-case-2.JPG)|![](img/trackball-case-3.JPG)|
|-|-|

### ボトムプレートを取り付け、ボトムプレートにトラックボールケースを取り付ける

![](img/bottom.JPG)

### トラックボールケースにボールを入れる

* ボールをケースに押し込んで入れます。

### 電池を入れる

* 電池をケースに入れます。向きに注意してください。

### 電池カバーを付ける

* 外側の爪2箇所をメイン基板にひっかけます。
* 内側の爪（USBコネクタ横の爪）を引っ張りながらメイン基板にひっかけます。

|![](img/battery-cover-1.JPG)|![](img/battery-cover-2.JPG)|![](img/battery-cover-3.JPG)|
|-|-|-|

* ボトムプレートを外した場合、下の図で赤く示した4箇所で固定されています

![](img/battery-cover-4.JPG)

### ゴム足を付ける

![](img/bottom-2.JPG)

### キーキャップを取り付ける

**以上で組立は完了です、お疲れさまでした。**

## 使い方

### 電源の説明

* スライドスイッチをON側に切り替えると電源が入ります。電源がONするとLEDが点滅します。
* 有線接続する場合でもスライドスイッチはON側にしてからケーブルを接続してください。OFFの状態で接続した場合はブートローダが起動します。

### LEDの説明

親指のところに赤色LEDがついています。

* 起動時：点滅回数(1~3)でバッテリー残量を示しています
* ペアリング中：ペアリング先を探している間、数秒に1回点灯します。ペアリングが完了すると1回点灯します。

![](img/led-1.gif)

### 無線接続

* 両手のスライドスイッチをONして、接続先のデバイスでペアリングします。

### キーマップを変更する

* [ZMK Studio](https://zmk.studio/)または[Keymap-Editor](https://nickcoutsos.github.io/keymap-editor/)でキーマップが変更できます。
* Keymap-Editorを使用する場合は[zmk-keyboard-torabo-tsuki-lp](https://github.com/sekigon-gonnoc/zmk-keyboard-torabo-tsuki-lp)をクローンして編集してください。
  * Keymap-Editorの仕様によりconfig/info.jsonはLサイズ用になっているため、S,Mサイズには存在しないキーも表示されます。

## トラブルと対策

* 初期不良による部品交換が必要な場合や、組立ミスのため一部部品だけ購入したい場合はBOOTHからメッセージをお送りください。
* 組立にあたってのトラブルで相談がある場合は本リポジトリのissueに投稿してください。
  * **投稿の前に既存のissueを検索してください**

## FAQ

まずはZMKのドキュメントを確認してください。

### 無線接続に問題がある

* 電源が入っているか確認してください。
* ZMKのドキュメントを確認してください。

### トラックボールの動きだしが遅い

* 一定時間ボールを動かさなかった場合にセンサーがスリープ状態になります。スリープ状態の解除に少し時間がかかるため動き出しが遅くなる場合があります。

### トラックボールの動きがおかしい/動かない

* [センサーの位置調整](#トラックボールセンサーをケースに取り付ける)をご確認ください。
* トラックボールのケーブルがコネクタにしっかりささっているか確認してください。
* センサーの仕様として、最大速度24inch/s、最大加速度10Gという制約があります。25mmボールの回転速度に換算すると9回転/sが最大速度で、これを超える速度で回転させた場合にはカーソルが逆方向に動くことがあります。

### 一部のキーが入力できない

* スイッチの足が折れ曲がっていないか、BMP Boostが浮いていないか確認してください。

### トラックボールの移動速度を変えたい/オートマウスレイヤー/スクロールレイヤーを使用したい

* ZMKのinput processorを使用してください。
